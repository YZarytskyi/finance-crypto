{"version":3,"file":"static/js/310.1436086c.chunk.js","mappings":"wQACA,EAAgN,+BAAhN,EAAuP,yBAAvP,EAA6R,8BAA7R,EAAuW,8BAAvW,EAA4iB,gCAA5iB,EAAulB,4B,mBCmFvlB,EAxEkB,WAChB,OAA0CA,EAAAA,EAAAA,GAHjB,iBAKvB,IAFF,eAAOC,EAAP,KAAsBC,EAAtB,KAKMC,GAASC,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMC,KAAKH,MAAf,IACnC,GAAwBI,EAAAA,EAAAA,UAAiB,GAAzC,eAAOC,EAAP,KAAaC,EAAb,KACA,GAAkCF,EAAAA,EAAAA,WAAkB,GAApD,eAAOG,EAAP,KAAkBC,EAAlB,KACA,GAAkCJ,EAAAA,EAAAA,UAAoB,IAAtD,eAAOK,EAAP,KAAkBC,EAAlB,KAEMC,GAAaC,EAAAA,EAAAA,QAA2B,MAExCC,EAAqBC,KAAKC,KAAKjB,EAAckB,OAAS,KAE5DC,EAAAA,EAAAA,YAAU,WACRT,GAAa,GACb,IAAMU,EAAgB,yCAAG,yGACJC,EAAAA,EAAAA,WAAqBd,EAAMP,GADvB,OACjBsB,EADiB,OAEvBV,EAAaU,GAFU,2CAAH,qDAItBF,IACAV,GAAa,EACd,GAAE,CAACH,IAMJ,OAAKL,GAKH,iCACE,qBAASqB,UAAS,UAAKC,EAAL,YAAoBA,GAAtC,WACE,eAAID,UAAWC,EAAmBC,IAAKZ,EAAvC,0BAGEb,EAAckB,QAWd,SAACQ,EAAA,EAAD,CACEjB,UAAWA,EACXkB,QAAShB,EACTX,cAAeA,EACf4B,oBA7BkB,SAACC,GAC3B5B,EAAiB4B,EAClB,KAaO,4BACE,cAAGN,UAAWC,EAAd,mDAGA,eAAGD,UAAWC,EAAd,gEACsD,KACpD,SAAC,KAAD,CAAMM,GAAG,gBAAT,4BAYP9B,EAAckB,OAAS,KACtB,gBAAKK,UAAWC,EAAhB,UACE,SAAC,KAAD,CACEjB,KAAMA,EACNC,QAASA,EACTuB,MAAOhB,EACPU,IAAKZ,UAlCN,SAAC,KAAD,CAAUiB,GAAG,KAwCvB,C","sources":["webpack://crypto-project/./src/pages/Portfolio/Portfolio.module.scss?3fa7","pages/Portfolio/Portfolio.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"iconTime\":\"Portfolio_iconTime__x+LIq\",\"hidden\":\"Portfolio_hidden__FH5Ov\",\"percentagePlus\":\"Portfolio_percentagePlus__lchrn\",\"percentageMinus\":\"Portfolio_percentageMinus__diItX\",\"tableHeader\":\"Portfolio_tableHeader__b9GpW\",\"table\":\"Portfolio_table__tl+1l\",\"tableCoins\":\"Portfolio_tableCoins__JUth2\",\"link\":\"Portfolio_link__6ZwLc\",\"pagination\":\"Portfolio_pagination__6FJE1\",\"star\":\"Portfolio_star__UDWqn\",\"starActive\":\"Portfolio_starActive__kHiom\",\"starHead\":\"Portfolio_starHead__26WV5\",\"chartImg\":\"Portfolio_chartImg__gylF+\",\"textNotFound\":\"Portfolio_textNotFound__H6-oO\",\"textLink\":\"Portfolio_textLink__bjxLj\"};","import { useEffect, useRef, useState } from 'react';\r\nimport { cryptoApi } from '../../api/cryptoApi';\r\nimport { useLocalStorageState } from '../../hooks/useStorage';\r\nimport { Markets } from '../../types/Types';\r\nimport { CoinTableHead } from '../Crypto/Coins/CoinTableHead';\r\nimport { TablePagination } from '../../Components/Common';\r\nimport { Link, Navigate } from 'react-router-dom';\r\nimport style from './Portfolio.module.scss';\r\nimport { useAppSelector } from '../../hooks/redux-hooks';\r\n\r\nconst SELECTED_COINS_KEY = 'selected-coins';\r\n\r\nconst Portfolio = () => {\r\n  const [selectedCoins, setSelectedCoins] = useLocalStorageState<string[]>(\r\n    SELECTED_COINS_KEY,\r\n    []\r\n  );\r\n\r\n  const isAuth = useAppSelector(state => state.auth.isAuth)\r\n  const [page, setPage] = useState<number>(1);\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n  const [portfolio, setPortfolio] = useState<Markets[]>([]);\r\n\r\n  const headingRef = useRef<HTMLHeadingElement>(null);\r\n\r\n  const countPages: number = Math.ceil(selectedCoins.length / 15);\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true)\r\n    const getPortfolioData = async () => {\r\n      const data = await cryptoApi.getMarkets(page, selectedCoins);\r\n      setPortfolio(data);\r\n    };\r\n    getPortfolioData();\r\n    setIsLoading(false)\r\n  }, [page]);\r\n\r\n  const setNewSelectedCoins = (newArr: string[]) => {\r\n    setSelectedCoins(newArr);\r\n  };\r\n\r\n  if (!isAuth) {\r\n    return <Navigate to='/' />\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <section className={`${style.table} ${style.tableCoins}`}>\r\n        <h1 className={style.tableHeader} ref={headingRef}>\r\n          My Portfolio\r\n        </h1>\r\n        {!selectedCoins.length ? (\r\n          <div>\r\n            <p className={style.textNotFound}>\r\n              There are not any coins in Portfolio\r\n            </p>\r\n            <p className={style.textLink}>\r\n              You can see available coins and add to Portfolio in{' '}\r\n              <Link to=\"/crypto/coins\">Coins</Link>\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <CoinTableHead\r\n            isLoading={isLoading}\r\n            markets={portfolio}\r\n            selectedCoins={selectedCoins}\r\n            setNewSelectedCoins={setNewSelectedCoins}\r\n          />\r\n        )}\r\n      </section>\r\n      {selectedCoins.length > 15 && (\r\n        <div className={style.pagination}>\r\n          <TablePagination\r\n            page={page}\r\n            setPage={setPage}\r\n            count={countPages}\r\n            ref={headingRef}\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Portfolio;\r\n"],"names":["useLocalStorageState","selectedCoins","setSelectedCoins","isAuth","useAppSelector","state","auth","useState","page","setPage","isLoading","setIsLoading","portfolio","setPortfolio","headingRef","useRef","countPages","Math","ceil","length","useEffect","getPortfolioData","cryptoApi","data","className","style","ref","CoinTableHead","markets","setNewSelectedCoins","newArr","to","count"],"sourceRoot":""}